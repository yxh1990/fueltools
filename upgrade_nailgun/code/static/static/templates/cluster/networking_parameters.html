<% var disabled = locked ? 'disabled' : '' %>

<% if (netManager) { %>
  <div>
    <legend class="networks" data-i18n="cluster_page.network_tab.networking_parameters.nova_configuration"></legend>
    <div>

      <div class="network-attribute">
        <label class="parameter-box clearfix">
          <div class="parameter-name" data-i18n="cluster_page.network_tab.networking_parameters.fixed_cidr"></div>
          <div class="parameter-control"><input type="text" name="fixed_networks_cidr" <%= disabled %> /></div>
          <div class="error validation-error"><span class="help-inline"></span></div>
        </label>
      </div>

      <% if (netManager == 'VlanManager') { %>

        <div class="network-attribute">
          <label class="parameter-box clearfix">
            <div class="parameter-name" data-i18n="cluster_page.network_tab.networking_parameters.fixed_size"></div>
            <div class="parameter-control"><select name="fixed_network_size" <%= disabled %> /></select></div>
            <div class="error validation-error"><span class="help-inline"></span></div>
          </label>
        </div>
        <div class="network-attribute">
          <label class="parameter-box clearfix">
            <div class="parameter-name" data-i18n="cluster_page.network_tab.networking_parameters.fixed_amount"></div>
            <div class="parameter-control"><input type="text" name="fixed_networks_amount" <%= disabled %> /></div>
            <div class="error validation-error"><span class="help-inline"></span></div>
          </label>
        </div>
        <div class="network-attribute">
          <div class="range-row-header mini">
            <div data-i18n="cluster_page.network_tab.range_start"></div>
            <div data-i18n="cluster_page.network_tab.range_end"></div>
          </div>
          <label class="parameter-box clearfix">
            <div class="networks-sub-title parameter-name" data-i18n="cluster_page.network_tab.networking_parameters.fixed_vlan_range"></div>
            <div class="range-row">
              <div class="parameter-control">
                <input type="text" class="mini range" name="fixed_networks_vlan_start" value="" <%= disabled %> />
              </div>
              <div class="parameter-control">
                <input type="text" class="mini" name="vlan_end" value="" disabled />
              </div>
              <div class="error validation-error"><span class="help-inline"></span></div>
            </div>
          </label>
        </div>

      <% } else { %>

        <div class="network-attribute">
          <div class="parameter-name" data-i18n="cluster_page.network_tab.networking_parameters.use_vlan_tagging_fixed"></div>
          <div class="vlan-tagging clearfix">
            <label class="parameter-box clearfix">
              <div class="parameter-control">
                <div class="custom-tumbler">
                  <input type="checkbox" <%= disabled %>>
                  <!-- [if !IE |(gte IE 9)]> --><span>&nbsp;</span><!-- <![endif] -->
                </div>
              </div>
            </label>
            <label class="parameter-box clearfix">
              <div class="parameter-control">
                <input type="text" value="" name="fixed_networks_vlan_start" <%= disabled %>>
              </div>
            </label>
            <div class="error validation-error"><span class="help-inline"></span></div>
          </div>
        </div>

      <% } %>

<% } else { %>

  <div>
    <legend class="networks" data-i18n="cluster_page.network_tab.networking_parameters.l2_configuration"></legend>
    <div>

      <div class="network-attribute">
        <div class="range-row-header mini">
          <div data-i18n="cluster_page.network_tab.range_start"></div>
          <div data-i18n="cluster_page.network_tab.range_end"></div>
        </div>
        <%var idRangePrefix = segmentation == 'gre' ? 'gre_id' : 'vlan' %>
        <div class="parameter-name"><span data-i18n="cluster_page.network_tab.networking_parameters.<%= idRangePrefix %>_range"</span></div>
        <div class="range-row <%- idRangePrefix %>_range-row clearfix">
          <label class="parameter-box clearfix">
            <div class="parameter-control"><input type="text" value="" class="mini range" name="range0" <%= disabled %> /></div>
          </label>
          <label class="parameter-box clearfix">
            <div class="parameter-control"><input type="text" value="" class="mini range" name="range1" <%= disabled %> /></div>
          </label>
          <div class="error validation-error"><span class="help-inline"></span></div>
        </div>
      </div>

      <div class="network-attribute">
        <label class="parameter-box clearfix">
          <div class="parameter-name" data-i18n="cluster_page.network_tab.networking_parameters.base_mac"></div>
          <div class="parameter-control"><input type="text" name="base_mac" <%= disabled %> /></div>
          <div class="error validation-error"><span class="help-inline"></span></div>
        </label>
      </div>

    </div>
  </div>

  <div>
    <legend class="networks" data-i18n="cluster_page.network_tab.networking_parameters.l3_configuration"></legend>
    <div>

      <div class="network-attribute">
        <label class="parameter-box clearfix">
          <div class="parameter-name" data-i18n="cluster_page.network_tab.networking_parameters.internal_cidr"></div>
          <div class="parameter-control"><input type="text" name="internal_cidr" <%= disabled %> /></div>
          <div class="error validation-error"><span class="help-inline"></span></div>
        </label>
      </div>

      <div class="network-attribute">
        <label class="parameter-box clearfix">
          <div class="parameter-name" data-i18n="cluster_page.network_tab.networking_parameters.internal_gateway"></div>
          <div class="parameter-control"><input type="text" name="internal_gateway" <%= disabled %> /></div>
          <div class="error validation-error"><span class="help-inline"></span></div>
        </label>
      </div>

    </div>
  </div>

<% } %>
    <div class="network-attribute">
          <div class="parameter-name">Enabled External Network</div>
          <div class="clearfix">
           <!--把div class='vlan-tagging clearfix'改成div class='clearfix'-->
            <label class="parameter-box clearfix">
              <div class="parameter-control">
                <div class="custom-tumbler">
                  <% if (l3enabled==true) {%>
                    <input type="checkbox" id="l3enabled" checked <%= disabled %>>
                 <% } else { %>
                    <input type="checkbox" id="l3enabled" <%= disabled %>>
                 <% } %>
                   <!-- [if !IE |(gte IE 9)]> -->
                      <span>&nbsp;</span>
                   <!-- <![endif] -->
                </div>
              </div>
            </label>
            <div class="error validation-error">
               <span class="help-inline"></span>
            </div>
          </div>
    </div>
    <div class="network-attribute floating">
      <div class="range-row-header">
        <div data-i18n="cluster_page.network_tab.range_start"></div>
        <div data-i18n="cluster_page.network_tab.range_end"></div>
      </div>
      <div class="parameter-name" data-i18n="cluster_page.network_tab.networking_parameters.floating_ranges"></div>
      <div class="floating-ranges-rows"></div>
    </div>

    <div class="network-attribute">
      <div class="parameter-name" data-i18n="cluster_page.network_tab.networking_parameters.dns_servers"></div>
      <div class="dns_nameservers-row range-row clearfix">
        <label class="parameter-box clearfix">
          <div class="parameter-control">
            <input class="range" type="text" name="range0" placeholder="127.0.0.1" value="" <%= disabled %> />
          </div>
        </label>
        <label class="parameter-box clearfix">
          <div class="parameter-control">
            <input class="range" type="text" name="range1" placeholder="127.0.0.1" value="" <%= disabled %> />
          </div>
        </label>
        <div class="error validation-error"><span class="help-inline"></span></div>
      </div>
    </div>
     <% var config = JSON.parse(external_config);
        var vlanid =config?config["vlan_id"]:null;
      %>
    <div class="network-attribute">
        <label class="parameter-box clearfix">
          <div class="parameter-name">VLAN ID</div>
          <div class="parameter-control"><input type="text" id="external_vlanid" <%= disabled %>  value="<%= vlanid?vlanid:'' %>"/></div>
          <div class="error validation-error"><span class="help-inline"></span></div>
        </label>
      </div>
  </div>
    
  <div class="network-attribute">
        <label class="parameter-box clearfix">
          <div class="parameter-name">External Gateway</div>
          <div class="parameter-control"><input type="text" name="external_gateway" <%= disabled %> /></div>
          <div class="error validation-error"><span class="help-inline"></span></div>
        </label>
      </div>
  </div>

 <div>
    <legend class="networks">Basic Network Configuration</legend>
    <div>
      <div class="network-attribute">
          <div class="parameter-name">Enable Basic Network</div>
          <div class="clearfix">
          <% var basenet = JSON.parse(basic_net); 
             var l3 =basenet?basenet["L3"]:null; 
             var basenetenabled=l3?l3["enabled"]:false; 
             var range0=l3?l3["range"].split(":")[0]:"10.142.26.20"
             var range1=l3?l3["range"].split(":")[1]:"10.142.26.200" %>
            <label class="parameter-box clearfix">
              <div class="parameter-control">
                <div class="custom-tumbler">
                  <% if (basenetenabled==true) {%>
                    <input type="checkbox" id="basenet_enaled" checked <%= disabled %>>
                  <% } else { %>
                    <input type="checkbox" id="basenet_enaled" <%= disabled %>>
                  <% } %>
                  <!-- [if !IE |(gte IE 9)]> --><span>&nbsp;</span><!-- <![endif] -->
                </div>
              </div>
            </label>
            <div class="error validation-error"><span class="help-inline"></span></div>
          </div>
    </div>
    <div class="network-attribute">
      <div class="range-row-header">
          <div data-i18n="cluster_page.network_tab.range_start"></div>
          <div data-i18n="cluster_page.network_tab.range_end"></div>
      </div>
      <div class="parameter-name">Allocation Pool</div>
      <div class="dns_nameservers-row range-row clearfix">
        <label class="parameter-box clearfix">
          <div class="parameter-control">
            <input class="range" type="text" id="baserange0" placeholder="127.0.0.1" value="<%= range0%>" <%= disabled %> />
          </div>
        </label>
        <label class="parameter-box clearfix">
          <div class="parameter-control">
            <input class="range" type="text" id="baserange1" placeholder="127.0.0.1" value="<%= range1%>" <%= disabled %> />
          </div>
        </label>
        <div class="error validation-error">
           <span class="help-inline"></span>
        </div>
      </div>
    </div>

    <div class="network-attribute">
        <label class="parameter-box clearfix">
          <div class="parameter-name">VLAN ID</div>
          <div class="parameter-control">
             <input type="text" id="basenet_vlan" <%= disabled %> value="<%= l3?l3['vlan_id']:'' %>" />
          </div>
          <div class="error validation-error">
             <span class="help-inline"></span>
          </div>
        </label>
    </div>

    <div class="network-attribute">
        <label class="parameter-box clearfix">
          <div class="parameter-name">Gateway</div>
          <div class="parameter-control">
             <input type="text" id="basenet_gateway" <%= disabled %> value="<%= l3?l3.gateway:'10.142.26.254' %>" />
          </div>
          <div class="error validation-error">
             <span class="help-inline"></span>
          </div>
        </label>
    </div>
  </div> 
</div>